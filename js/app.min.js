var view=view||{},events=events||{},mouseObj={},windowObj={};view.init=function(){$(window).resize(function(){view.resizer()});view.resizer();view.index=0;view.total=$("#grid a").length;setTimeout(function(){$("#grid video").eq(0).get(0).paused?view.autoplay=!1:view.autoplay=!0},1E3);var a=[];$("#grid a").each(function(b){0==$(this).data("video")&&(a[b]=new Image,a[b].src="img/content/1/l/"+$(this).data("name"))})};view.resizer=function(){windowObj.w=$(window).width();windowObj.h=$(window).height()};
view.load=function(a){a=a.replace(/^\/|\/$/g,"");a=a.split("/");$.ajax({type:"POST",url:"/sys/control/load.php",data:{path:a},success:function(b){$("section").html(b)}});$("nav a").removeClass("active");$('nav a[href="/'+a[0]+'"]').addClass("active")};
events.init=function(){$("a").not("#about div p a").click(function(a){a.preventDefault()});$("header a").click(function(a){$("body").hasClass("about")?$("body").removeClass("about"):$("body").addClass("about")});$("#grid a").click(function(a){$("body").hasClass("zoom")||events.animating||(events.animating=!0,events.pauseVideo("#grid video"),view.index=$(this).index("#grid a"),view.img=$(this).data("name"),events.set(),$("#grid a").each(function(b){b<view.index?$(this).stop(!0,!1).delay(40*(view.index-
b)).animate({opacity:0},{duration:600,easing:$.bez([.215,.61,.355,1])}):b>view.index?$(this).stop(!0,!1).delay(40*(b-view.index)).animate({opacity:0},{duration:600,easing:$.bez([.215,.61,.355,1])}):$(this).stop(!0,!1).delay(1E3).animate({opacity:0},{duration:600,easing:$.bez([.645,.045,.355,1])})}),setTimeout(function(){events.animate(!0,!1);$("#modal div >").stop(!0,!1).css({opacity:0}).animate({opacity:1},{duration:1E3,easing:$.bez([.645,.045,.355,1]),complete:function(){events.animating=!1}});
$("body").addClass("zoom");$("#grid a").stop(!0,!1).css({opacity:0});events.addKeys()},1600))});$("#modal > a").click(function(a){$("body").hasClass("zoom")&&(events.removeKeys(),view.autoplay&&events.playVideo("#grid video"),events.pauseVideo("#modal video"),$("#modal div > :not(#temp)").stop(!0,!1).animate({opacity:0},{duration:1E3,easing:$.bez([.645,.045,.355,1]),complete:function(){$("body").removeClass("zoom");var b=$("#grid a:eq("+view.index+")").offset().top-windowObj.h/2+120;window.scrollTo(0,
b);$("#grid a").each(function(c){c<view.index?$(this).stop(!0,!1).delay(40*(view.index-c)+600).animate({opacity:1},{duration:600,easing:$.bez([.215,.61,.355,1])}):c>view.index?$(this).stop(!0,!1).delay(40*(c-view.index)+600).animate({opacity:1},{duration:600,easing:$.bez([.215,.61,.355,1])}):$(this).stop(!0,!1).css({opacity:0}).animate({opacity:1},{duration:600,easing:$.bez([.215,.61,.355,1])})})}}))});$("#modal div").click(function(a){events.next()});events.time()};
events.addKeys=function(){$("body").keydown(function(a){switch(a.keyCode||a.which){case 37:events.previous();break;case 39:events.next();break;case 27:$("#modal > a").click()}})};events.removeKeys=function(){$("body").unbind("keydown")};events.next=function(){events.animating||(view.index<view.total-1?view.index++:view.index=0,events.animate(!0,!0))};events.previous=function(){events.animating||(0<view.index?view.index--:view.index=view.total-1,events.animate(!1,!0))};
events.set=function(){var a=$("#grid a:eq("+view.index+")").data("video"),b=$("#grid a:eq("+view.index+")").data("name");(a?$('<video id="temp" loop playsinline><source src="'+b+'" type="video/mp4"></video>'):$('<img id="temp" src="img/content/1/l/'+b+'">')).appendTo("#modal div")};
events.animate=function(a,b){events.animating=!0;b&&events.set();$("#modal div > :not(#temp)").remove();$("#temp").removeAttr("id");$("#grid a:eq("+view.index+")").data("video")&&$("#modal div video").get(0).play();events.animating=!1};events.playVideo=function(a){$(a).each(function(){var b=$(this).get(0);b.paused&&b.play()})};events.pauseVideo=function(a){$(a).each(function(){var b=$(this).get(0);b.paused||b.pause()})};
events.time=function(){function a(){b=new Date;document.getElementById("time").innerHTML=b.toLocaleString("en-US",{hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit",timeZone:"Asia/Shanghai"})}var b;setInterval(function(){a()},1E3);a()};$(document).ready(function(){view.init();events.init()});